{% extends 'base.html.twig' %}

{% block title %}Hello !{% endblock %}

{% block body %}
    <div class="container">
        <h1>{{ posts|length }} Posts</h1>

        {% if app.user %}
            {% if app.user.roles[0] == 'ROLE_ADMIN' %}
                <p><a href="{{ path('post_create_path') }}" class="btn btn-secondary">Create Post</a></p>
            {% endif %}
        {% endif %}

        {% for post in posts %}
            <article>
                <header>
                    <h2><a href="{{ path('post_path', {"id": post.id}) }}">{{ ToUpper(post.title) }}</a></h2>
                </header>
                <p>{{ post.description|truncate(50, true) }}</p>
                <p>Le: {{ post.date|date }}</p>
            </article>
            <hr>
        {% endfor %}
    </div>
{% endblock %}
